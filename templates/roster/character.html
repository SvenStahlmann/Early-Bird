{% extends 'roster/base.html' %}
{% load static %}
{% load get_items get_mainhand_items get_offhand_items get_third_weapon_slot %}

{% block css_page %}
    <link rel="stylesheet" href="{% static 'roster/css/character.css' %}">
{% endblock css_page %}

{% block content %}
    <div class="grid-container fluid">
        <br>
        <h1><a class="button secondary"
               href="{% url 'roster_overview' %}?specialization={{ character.specialization.id }}">Zur√ºck</a> Attendance
        </h1>
        <br>
        <div class="callout gear-background">
            <div class="outer">
                <div class="inner">
                    <table class="attendance-table unstriped">
                        <thead>
                        <tr>
                            <th class="fix">Datum</th>
                            {% for raid_day in character.attendance.all reversed %}
                                <th class="text-center">{{ raid_day.raid_day.date }}</th>
                            {% endfor %}
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td class="fix"><b>Anwesenheit</b></td>
                            {% for raid_day in character.attendance.all reversed %}
                                <td class="text-center {% if raid_day.present %}check{% else %}cross{% endif %}">+</td>
                            {% endfor %}
                        </tr>
                        <tr>
                            <td class="fix"><b>Kalendereintrag</b></td>
                            {% for raid_day in character.attendance.all reversed %}
                                <td class="text-center {% if raid_day.calendar_entry %}check{% else %}cross{% endif %}">
                                    +
                                </td>
                            {% endfor %}
                        </tr>
                        <tr>
                            <td class="fix"><b>Consumables</b></td>
                            {% for raid_day in character.attendance.all reversed %}
                                <td class="text-center {% if raid_day.consumables %}check{% else %}cross{% endif %}">+
                                </td>
                            {% endfor %}
                        </tr>
                        <tr>
                            <td class="fix"><b>World Buffs</b></td>
                            {% for raid_day in character.attendance.all reversed %}
                                <td class="text-center {% if raid_day.world_buffs %}check{% else %}cross{% endif %}">+
                                </td>
                            {% endfor %}
                        </tr>
                        <tr>
                            <td class="fix"><b>Fehlverhalten</b></td>
                            {% for raid_day in character.attendance.all reversed %}
                                <td {% if raid_day.misconduct %}data-tooltip tabindex="2" title="{{ raid_day.comment }}"{% endif %} class="text-center {% if raid_day.misconduct %}cross top{% else %}check{% endif %}">+
                                </td>
                            {% endfor %}
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <br>
        <h1>Gear</h1>
        <br>
        <div class="grid-x">
            <div class="cell medium-2">

            </div>
            <div class="cell medium-8 callout gear-background">
                <div class="grid-x">
                    <div class="cell small-6">
                        {% for item in character|get_items:"HEAD" %}
                            <a class="float-left" href="{{ item.wowhead_link }}" target="_blank">
                                <img class="item-img" src="/media/{{ item.icon }}">
                            </a>
                        {% endfor %}
                    </div>
                    <div class="cell small-6">
                        {% for item in character|get_items:"HANDS" %}
                            <a class="float-right" href="{{ item.wowhead_link }}" target="_blank">
                                <img class="item-img" src="/media/{{ item.icon }}">
                            </a>
                        {% endfor %}
                    </div>
                </div>
                <br>
                <div class="grid-x">
                    <div class="cell small-6">
                        {% for item in character|get_items:"NECK" %}
                            <a class="float-left" href="{{ item.wowhead_link }}" target="_blank">
                                <img class="item-img" src="/media/{{ item.icon }}">
                            </a>
                        {% endfor %}
                    </div>
                    <div class="cell small-6">
                        {% for item in character|get_items:"WAIST" %}
                            <a class="float-right" href="{{ item.wowhead_link }}" target="_blank">
                                <img class="item-img" src="/media/{{ item.icon }}">
                            </a>
                        {% endfor %}
                    </div>
                </div>
                <br>
                <div class="grid-x">
                    <div class="cell small-6">
                        {% for item in character|get_items:"SHOULDERS" %}
                            <a class="float-left" href="{{ item.wowhead_link }}" target="_blank">
                                <img class="item-img" src="/media/{{ item.icon }}">
                            </a>
                        {% endfor %}
                    </div>
                    <div class="cell small-6">
                        {% for item in character|get_items:"LEGS" %}
                            <a class="float-right" href="{{ item.wowhead_link }}" target="_blank">
                                <img class="item-img" src="/media/{{ item.icon }}">
                            </a>
                        {% endfor %}
                    </div>
                </div>
                <br>
                <div class="grid-x">
                    <div class="cell small-6">
                        {% for item in character|get_items:"BACK" %}
                            <a class="float-left" href="{{ item.wowhead_link }}" target="_blank">
                                <img class="item-img" src="/media/{{ item.icon }}">
                            </a>
                        {% endfor %}
                    </div>
                    <div class="cell small-6">
                        {% for item in character|get_items:"FEET" %}
                            <a class="float-right" href="{{ item.wowhead_link }}" target="_blank">
                                <img class="item-img" src="/media/{{ item.icon }}">
                            </a>
                        {% endfor %}
                    </div>
                </div>
                <br>
                <div class="grid-x">
                    <div class="cell small-6">
                        {% for item in character|get_items:"CHEST" %}
                            <a class="float-left" href="{{ item.wowhead_link }}" target="_blank">
                                <img class="item-img" src="/media/{{ item.icon }}">
                            </a>
                        {% endfor %}
                    </div>
                    <div class="cell small-6">
                        {% for item in character|get_items:"FINGER" %}
                            <a class="float-right" href="{{ item.wowhead_link }}" target="_blank">
                                <img class="item-img" src="/media/{{ item.icon }}">
                            </a>
                        {% endfor %}
                    </div>
                </div>
                <br>
                <div class="grid-x">
                    <div class="cell small-6">
                        {% for item in character|get_items:"WRIST" %}
                            <a class="float-left" href="{{ item.wowhead_link }}" target="_blank">
                                <img class="item-img" src="/media/{{ item.icon }}">
                            </a>
                        {% endfor %}
                    </div>
                    <div class="cell small-6">
                        {% for item in character|get_items:"TRINKET" %}
                            <a class="float-right" href="{{ item.wowhead_link }}" target="_blank">
                                <img class="item-img" src="/media/{{ item.icon }}">
                            </a>
                        {% endfor %}
                    </div>
                </div>
                <br>
                <br>
                <br>
                <div class="grid-x">
                    <div class="cell medium-2"></div>
                    <div class="cell medium-8">
                        <div class="grid-x text-center">
                            <div class="cell medium-4">
                                {% for item in character|get_mainhand_items %}
                                    <a href="{{ item.wowhead_link }}" target="_blank">
                                        <img class="item-img" src="/media/{{ item.icon }}">
                                    </a>
                                {% endfor %}
                            </div>
                            <div class="cell medium-4">
                                {% for item in character|get_offhand_items %}
                                    <a href="{{ item.wowhead_link }}" target="_blank">
                                        <img class="item-img" src="/media/{{ item.icon }}">
                                    </a>
                                {% endfor %}
                            </div>
                            <div class="cell medium-4">
                                {% for item in character|get_third_weapon_slot %}
                                    <a href="{{ item.wowhead_link }}" target="_blank">
                                        <img class="item-img" src="/media/{{ item.icon }}">
                                    </a>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
                <br>
            </div>
        </div>
        <br>
        <h1>Loot History</h1>
        <br>
        <div class="callout gear-background" style="max-height: 500px; overflow-y: scroll">
            {% for loot in character.loot_history.all reversed %}
                <div class="grid-x grid-padding-y grid-padding-x">
                    <div class="cell small-2">
                        {{ loot.raid_day.date }}
                    </div>
                    <div class="cell small-10">
                        <a class="{{ loot.item.quality }}" href="{{ loot.item.wowhead_link }}"><img class="item-icon" src="/media/{{ loot.item.icon }}">&emsp;{{ loot.item }}</a>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock content %}